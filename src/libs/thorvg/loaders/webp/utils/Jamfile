SubDir HAIKU_TOP src libs thorvg loaders webp utils ;

local webpC++Flags = -std=c++14 -fno-exceptions -fno-rtti -Wno-unused-parameter ;
SubDirC++Flags $(webpC++Flags) ;

# ThorVG headers
UseLibraryHeaders thorvg ;
SubDirHdrs [ FDirName $(HAIKU_TOP) src libs thorvg ] ;
SubDirHdrs [ FDirName $(HAIKU_TOP) src libs thorvg common ] ;

SubDirHdrs $(SUBDIR:P) ;
SubDirHdrs $(SUBDIR:P) webp ;

local sources =
	bit_reader.cpp
	color_cache.cpp
	huffman.cpp
	quant_levels_dec.cpp
	random.cpp
	rescaler.cpp
;

local architectureObject ;
for architectureObject in [ MultiArchSubDirSetup ] {
	on $(architectureObject) {
		StaticLibrary [ MultiArchDefaultGristFiles libwebp_utils.a ] :
			$(sources)
			;
	}
}