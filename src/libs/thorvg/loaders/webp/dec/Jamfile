SubDir HAIKU_TOP src libs thorvg loaders webp dec ;

local webpC++Flags = -std=c++14 -fno-exceptions -fno-rtti -Wno-unused-parameter ;
SubDirC++Flags $(webpC++Flags) ;

# ThorVG headers
UseLibraryHeaders thorvg ;
SubDirHdrs [ FDirName $(HAIKU_TOP) src libs thorvg ] ;
SubDirHdrs [ FDirName $(HAIKU_TOP) src libs thorvg common ] ;

SubDirHdrs $(SUBDIR:P) ;
SubDirHdrs $(SUBDIR:P) webp ;
SubDirHdrs $(SUBDIR:P) utils ;

local sources =
	alpha.cpp
	buffer.cpp
	frame.cpp
	io.cpp
	quant.cpp
	tree.cpp
	vp8.cpp
	vp8l.cpp
	webp.cpp
;

local architectureObject ;
for architectureObject in [ MultiArchSubDirSetup ] {
	on $(architectureObject) {
		StaticLibrary [ MultiArchDefaultGristFiles libwebp_dec.a ] :
			$(sources)
			;
	}
}