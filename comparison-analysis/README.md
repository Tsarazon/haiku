# Haiku Build Comparison Tools

–ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è JAM –∏ Meson —Å–±–æ—Ä–æ–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Haiku OS.

## compare_builds.py

–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –º–µ–∂–¥—É JAM –∏ Meson —Å–±–æ—Ä–∫–∞–º–∏.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ —Ñ–∞–π–ª–æ–≤** —Å –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º
- üîç **–ê–Ω–∞–ª–∏–∑ —Å–∏–º–≤–æ–ª–æ–≤** - –ø—É–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- üìö **–ü–æ–¥—Å—á–µ—Ç —Å–µ–∫—Ü–∏–π** ELF –æ–±—ä–µ–∫—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤  
- üîé **–ü–æ–∏—Å–∫ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤** –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º
- üìù **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** –≤ Markdown —Ñ–æ—Ä–º–∞—Ç–µ
- üíæ **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- üîß **–î–µ–º–∞–Ω–≥–ª C++ —Å–∏–º–≤–æ–ª–æ–≤** –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –ë–∞–∑–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

```bash
# –°—Ä–∞–≤–Ω–∏—Ç—å Interface Kit
./compare_builds.py interface_kit "*/interface/interface_kit.o"

# –°—Ä–∞–≤–Ω–∏—Ç—å Storage Kit  
./compare_builds.py storage_kit "*/storage/storage_kit.o"

# –°—Ä–∞–≤–Ω–∏—Ç—å App Kit
./compare_builds.py app_kit "*/app/app_kit.o"
```

#### –° –ø–æ–∏—Å–∫–æ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

```bash
# –ü–æ–∏—Å–∫ HSL/RGB —Ñ—É–Ω–∫—Ü–∏–π –≤ Interface Kit
./compare_builds.py interface_kit "*/interface/interface_kit.o" --search-symbols hsl rgb color

# –ü–æ–∏—Å–∫ —Ñ—É–Ω–∫—Ü–∏–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
./compare_builds.py locale_kit "*/locale/locale_kit.o" --search-symbols locale catalog translation
```

#### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç –≤ —Ñ–∞–π–ª
./compare_builds.py interface_kit "*/interface/interface_kit.o" \
    --output interface_kit_report.md

# –°–æ–∑–¥–∞—Ç—å –∏ JSON –∏ Markdown –æ—Ç—á–µ—Ç—ã
./compare_builds.py storage_kit "*/storage/storage_kit.o" \
    --output storage_kit_report.md --json
```

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

```bash
# –ï—Å–ª–∏ Haiku –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥—Ä—É–≥–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
./compare_builds.py interface_kit "*/interface/interface_kit.o" \
    --haiku-root /path/to/haiku
```

### –ü—Ä–∏–º–µ—Ä—ã –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü–∞—Ç—Ç–µ—Ä–Ω |
|-----------|---------|
| Interface Kit | `*/interface/interface_kit.o` |
| Storage Kit | `*/storage/storage_kit.o` |
| App Kit | `*/app/app_kit.o` |
| Support Kit | `*/support/support_kit.o` |
| Locale Kit | `*/locale/locale_kit.o` |
| libbe.so | `*/kits/be/libbe.so*` |
| libroot.so | `*/libroot/libroot.so*` |
| –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã | `*/interface/View.o` |
| –í—Å–µ .o —Ñ–∞–π–ª—ã –∫–∏—Ç–∞ | `*/interface/*.o` |

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
- **< 1% —Ä–∞–∑–Ω–∏—Ü–∞**: ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ
- **< 5% —Ä–∞–∑–Ω–∏—Ü–∞**: ‚ö†Ô∏è –ú–∞–ª–∞—è —Ä–∞–∑–Ω–∏—Ü–∞  
- **> 5% —Ä–∞–∑–Ω–∏—Ü–∞**: ‚ùå –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞

#### –°–∏–º–≤–æ–ª—ã
- **Identical symbols**: ‚úÖ –ù–∞–±–æ—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
- **Minor differences**: ‚ö†Ô∏è –ù–µ—Å–∫–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- **Major differences**: ‚ùå –ú–Ω–æ–≥–æ —Ä–∞–∑–ª–∏—á–∞—é—â–∏—Ö—Å—è —Å–∏–º–≤–æ–ª–æ–≤

#### –°–µ–∫—Ü–∏–∏ ELF
- **0-3 —Ä–∞–∑–Ω–∏—Ü–∞**: ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞
- **4-10 —Ä–∞–∑–Ω–∏—Ü–∞**: ‚ö†Ô∏è –ó–∞–º–µ—Ç–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞
- **>10 —Ä–∞–∑–Ω–∏—Ü–∞**: ‚ùå –°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞

### –ö–æ–¥—ã –≤—ã—Ö–æ–¥–∞

- **0**: –°–±–æ—Ä–∫–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã –∏–ª–∏ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏
- **1**: –ï—Å—Ç—å –∑–∞–º–µ—Ç–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è, —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

## –ü—Ä–∏–º–µ—Ä—ã –æ—Ç—á–µ—Ç–æ–≤

### –£—Å–ø–µ—à–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
```
üéâ PERFECT MATCH! Builds are essentially identical.
   Size difference: +0.14%
   Symbol count: JAM=5383, Meson=5383  
   Identical symbols: ‚úÖ YES
```

### –ï—Å—Ç—å —Ä–∞–∑–ª–∏—á–∏—è
```
‚ö†Ô∏è Builds differ - check the report for details.
   Size difference: +2.30%
   Symbol count: JAM=5383, Meson=5390
   Identical symbols: ‚ùå NO
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –ë—ã—Å—Ç—Ä–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–∏—Ç–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:

```bash
#!/bin/bash
# compare_all_kits.sh

KITS=(
    "interface_kit */interface/interface_kit.o"
    "storage_kit */storage/storage_kit.o" 
    "support_kit */support/support_kit.o"
    "app_kit */app/app_kit.o"
    "locale_kit */locale/locale_kit.o"
)

for kit in "${KITS[@]}"; do
    name=$(echo $kit | cut -d' ' -f1)
    pattern=$(echo $kit | cut -d' ' -f2-)
    
    echo "Comparing $name..."
    ./compare_builds.py "$name" "$pattern" --output "${name}_report.md"
    echo "---"
done
```

### –ü–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º –≤ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ .o —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ JAM –Ω–æ –Ω–µ—Ç –≤ Meson
./compare_builds.py missing_objects "*.o" 2>&1 | grep "No Meson objects"
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### "No JAM objects found"
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ JAM —Å–±–æ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞: `jam -q <target>`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω –ø–æ–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ `--haiku-root`

### "No Meson objects found"  
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Meson —Å–±–æ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞: `meson compile -C builddir <target>`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω –ø–æ–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ builddir —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### –û—à–∏–±–∫–∏ nm/objdump
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª—ã —è–≤–ª—è—é—Ç—Å—è –æ–±—ä–µ–∫—Ç–Ω—ã–º–∏/–∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ binutils —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–°–∫—Ä–∏–ø—Ç –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –¥–ª—è:
- –°—Ä–∞–≤–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ (.so, –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö)
- –ê–Ω–∞–ª–∏–∑–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∏ ABI —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ CI/CD pipeline